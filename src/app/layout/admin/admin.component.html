<div [@routerTransition]>
  <app-page-header [heading]="'Admin'" [icon]="'fa fa-fw fa-gear'"></app-page-header>

  <button type="button" class="btn btn-secondary margin_button" (click)="toggle()" id="bt">
    {{buttonName}}
  </button>
  <button type="button" class="btn btn-secondary margin_button" (click)="toggle_stat()" id="bt2">
    {{buttonName2}}
  </button>
  <button type="button" class="btn btn-secondary margin_button" (click)="toggle_camp()" id="bt3">
    {{buttonName3}}
  </button>
  <br>
  <hr class="style18">


  <ng-container *ngIf="show">
    <div class="col-md-9">
      <form #form>
        <div *ngIf="files_uploaded === 0">
          <input type="file" class="form-control-file mt-3" placeholder="File Name" 
          name="filename" (change)="upload($event.target.files)"
          accept ="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" />

          <div class="progress mt-3" style="height:40px;">
            <div id="trainingProgressBar" class="progress-bar 
                progress-bar-success progress-bar-striped bg-warning active"
              role="progressbar" aria-valuemin="0" aria-valuemax="100" [attr.aria-valuenow]="percentDone"
              [style.width.%]="percentDone">
              {{percentDone}}
            </div>
          </div>
        </div>

        <label *ngIf="inProgress">
          Progression: {{percentDone}}% <br /></label>
      </form>
      <ng-container>
        <div *ngIf="inProgress">
          <p id="status_bytes">{{bytesDone | number:'3.0'}}Ko uploadé sur {{totalBytes | number:'3.0'}}Ko</p>
        </div>
      </ng-container>
      <ng-container *ngIf="uploadSuccess" class="mt-3">
        <p class="font-weight-bold text-success">Téléchargement terminé avec succès !</p>
      </ng-container>
      <div class="container-info">
        <label>
          Fichier téléchargé:
          <span id="uploadedFiles">{{files_uploaded}}</span>
        </label>
      </div>
      <div *ngIf="activate_table">
        <div class="col col-xl-9 col-lg-12" style="padding:0px">
          <div class="card mb-3">
            <table class="table table-hover">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">Nom</th>
                  <th scope="col">Taille</th>
                  <th scope="col">Date de dernière modification</th>
                </tr>
              </thead>
              <tr class="table" id="displayTable" *ngFor="let file of file_list">
                <td class="tableau"> {{file.name}}</td>
                <td class="tableau"> {{file.size| number:'3.'}} Ko</td>
                <td class="tableau"> {{file.lastModifiedDate | date:'medium'}}</td>
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="form-group mt-3" style="width:220px;">
        <button type="submit" class="btn btn-primary pull-right">Confirmer</button>
        <button type="reset" class="btn btn-danger" (click)="reset()">Supprimer</button>
      </div>
    </div>






    <!-- <div class="container margin_table">
      <div class="col-md-9">
        <h3>Tableau des stages</h3>
        <form method="POST" action="#" enctype="multipart/form-data">-->
    <!-- COMPONENT START -->
    <!-- <div class="form-group">
            <div class="input-group input-file" name="Fichier1">
              <input ng2FileSelect type="file" class="form-control" onchange="$('#upload-file-info').html(this.files[0].name)"
                placeholder='Sélectionner un fichier...' hidden #fileInput />
              <input id="upload-file-info" type="text" class="form-control" placeholder='Sélectionner un fichier...' />
              <span class="input-group-btn">
                <button class="btn btn-default btn-choose padding_button" type="button" (click)="openFileDialog();">Choisir</button>
              </span>
              <span class='label label-info' id="upload-file-info"></span>
            </div>
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
              </div>
              <form class="custom-file">
                <input name="filename" type="file" class="custom-file-input" id="customFileLang" lang="fr" class="form-control-file">
                <label class="custom-file-label" for="customFileLang">Sélectionner le fichier </label>
              </form>
            </div>
          </div> -->
    <!-- COMPONENT END -->
    <!-- </form>
      </div>
    </div>
    <div class="input-group">
      <div class="input-group-prepend">
        <span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
      </div>
      <div class="custom-file">
        <input type="file" class="custom-file-input" id="inputGroupFile01" aria-describedby="inputGroupFileAddon01">
        <label class="custom-file-label" for="inputGroupFile01">Choose file</label>
      </div>
    </div> -->
  </ng-container>

  <ng-container *ngIf="show_stat">
    <div class="row">
      <div class="col col-sm-6">
        <div class="card mb-3">
          <div class="card-header">
            Suivi des stages
          </div>
          <div class="card-body">
            <canvas baseChart height="180px" [data]="doughnutChartData" [labels]="doughnutChartLabels" [chartType]="doughnutChartType"
              (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
            </canvas>
          </div>
        </div>
      </div>
      <div class="col col-sm-6">
        <div class="card mb-3">
          <div class="card-header">
            Nombre de stagiaires par professeur
          </div>
          <div class="card-body">
            <canvas baseChart [datasets]="barChartData" [labels]="barChartLabels" [options]="barChartOptions" [legend]="barChartLegend"
              [chartType]="barChartType" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
            </canvas>
          </div>
          <div class="card-footer">
            <button class="btn btn-info btn-sm" (click)="randomize()">Mettre à jour</button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>



  <ng-container *ngIf="show_camp">

  </ng-container>
</div>